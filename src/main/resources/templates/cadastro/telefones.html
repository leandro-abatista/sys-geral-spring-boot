<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>curso springboot</title>
<!--Let browser know website is optimized for mobile-->
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<!--Import Google Icon Font-->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!--Import materialize.css-->
<link type="text/css" rel="stylesheet" href="/materialize/css/materialize.css"  media="screen,projection"/>
<link type="text/css" rel="stylesheet" href="/materialize/css/materialize.min.css"  media="screen,projection"/>

</head>
<body>

	<h3>Spring Boot + Thymeleaf + Materialize CSS Design</h3>
	<br>
	<h5>Dados da Pessoa</h5>	
	<br>
		<!-- validação de mensagens -->
		<div th:each="m: ${msg}">
			<span th:text="${m}"></span>
		</div>
	<br>
	<div class="row">
		<div class="col s6">
			<a href="/cadastropessoa" class="waves-effect waves-light btn"><i class="material-icons left">reply_all</i>Voltar</a>
			<a href="#" class="waves-effect waves-light btn"><i class="material-icons left">home</i>Início</a>
		</div>
	</div>
	
	<div class="card-panel teal blue-grey lighten-4">
		<div th:each="p:${pessoaObject}">
		<div class="row">
			<h6>CÓDIGO: <span th:text="${p.codigo}"></span></h6>
			<h6>NOME: <span th:text="${p.nome}"></span></h6>
			<h6>CPF: <span th:text="${p.cpf}"></span></h6>
			<h6>IDADE: <span th:text="${p.idade}"></span></h6>
			<h6>TELEFONE: <span th:text="${p.telefone}"></span></h6>
			<h6>E-MAIL: <span th:text="${p.email}"></span></h6>
		</div>
		</div>
	</div>
	
	<br>
	
	<div class="row">
	
		<h5>Cadastro de Telefones</h5>
		
		
			<form id="formTelefone" th:action="@{/addFonePerson/{pessoa_codigo}(pessoa_codigo=${pessoaObject.codigo})}" 
				method="post" class="card-panel teal blue-grey lighten-4 col s12"
				onsubmit="return validarCampos();">
			
				<div class="row">
					<div class="input-field col s6">
						<input type="text" class="validate" id="codigo" name="codigo" readonly="readonly">	
						<label for="codigo">Código</label>
					</div>
				</div>
				
				<div class="row">
					<div class="input-field col s6">
						<input type="text" class="validate" id="tipo" name="tipo">	
						<label for="tipo">Tipo</label>
					</div>
				</div>
				
				<div class="row">
					<div class="input-field col s6">
						<input type="text" class="validate" id="numero" name="numero">	
						<label for="numero">Número</label>
					</div>
				</div>

				<div class="row">
					<div class="input-field col s6">
						<button class="btn waves-effect waves-light" type="submit">
							<i class="material-icons left">add</i>Adicionar
						</button>
	
						<button class="btn waves-effect waves-light" type="submit"
							onclick="document.getElementById('formTelefone').reset();">
							<i class="material-icons left">cancel</i>Cancelar
						</button>
					</div>
				</div>

		</form>
		
	</div>
	
	<table class="responsive-table striped card-panel teal blue-grey lighten-4">
	
		<thead>
			<tr>
				<th>CÓDIGO</th>
				<th>TIPO</th>
				<th>TELEFONE</th>
				<th>EXCLUIR</th>
			</tr>
		</thead>
		
		<tbody>
			<tr th:each = "fone: ${telefones}">
				<td th:text="${fone.codigo}"></td>
				<td th:text="${fone.tipo}"></td>
				<td th:text="${fone.numero}"></td>
				
				<td>
				<a class="waves-effect waves-light btn-small"
					th:href="@{/deleteFone/{codigotelefone}(codigotelefone=${fone.codigo})}">Excluir</a>
				</td>
				
			</tr>
		</tbody>
	</table>
		
	
	<!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="/materialize/js/materialize.min.js"></script>
    <script type="text/javascript" src="/materialize/js/materialize.js"></script>
    
    <script type="text/javascript">
    
    	/*validação dos campos tipo e número de telefone*/
		function validarCampos(){
			tipo = document.getElementById('tipo').value;
			numero = document.getElementById('numero').value;

			if(tipo === ''){
				alert('Tipo de telefone deve ser informado!');
				return false;
			} else if (numero === ''){
				alert('Número de telefone deve ser informado!');
				return false;
			}
			return true;
		}
    </script>
</body>
</html>